"use strict";(self.webpackChunkopenedv_wiki=self.webpackChunkopenedv_wiki||[]).push([[90398],{28453:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>c});var l=i(96540);const d={},r=l.createContext(d);function s(n){const e=l.useContext(r);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:s(n.components),l.createElement(r.Provider,{value:e},n.children)}},46103:(n,e,i)=>{i.d(e,{A:()=>l});const l=i.p+"assets/images/33-aba86d0a775add2cecb5c9cf290f70e5.png"},87908:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>s,default:()=>_,frontMatter:()=>r,metadata:()=>c,toc:()=>h});var l=i(74848),d=i(28453);const r={title:"DMA\u5b9e\u9a8c",sidebar_position:9},s="DMA\u5b9e\u9a8c",c={id:"Boards/RaspberryPi/DNRP2350A/set-up-development-environment/example-sdk/dma",title:"DMA\u5b9e\u9a8c",description:"\u524d\u8a00",source:"@site/docs/Boards/RaspberryPi/DNRP2350A/set-up-development-environment/example-sdk/dma.md",sourceDirName:"Boards/RaspberryPi/DNRP2350A/set-up-development-environment/example-sdk",slug:"/Boards/RaspberryPi/DNRP2350A/set-up-development-environment/example-sdk/dma",permalink:"/docs/Boards/RaspberryPi/DNRP2350A/set-up-development-environment/example-sdk/dma",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{title:"DMA\u5b9e\u9a8c",sidebar_position:9},sidebar:"BoardsRaspberryPiDNRP2350ASidebar",previous:{title:"PWM\u5b9e\u9a8c",permalink:"/docs/Boards/RaspberryPi/DNRP2350A/set-up-development-environment/example-sdk/pwm"},next:{title:"ADC\u5b9e\u9a8c",permalink:"/docs/Boards/RaspberryPi/DNRP2350A/set-up-development-environment/example-sdk/adc"}},a={},h=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"DMA \u4ecb\u7ecd",id:"dma-\u4ecb\u7ecd",level:2},{value:"1\uff0cDMA\u7b80\u4ecb",id:"1dma\u7b80\u4ecb",level:3},{value:"\u786c\u4ef6\u8bbe\u8ba1",id:"\u786c\u4ef6\u8bbe\u8ba1",level:2},{value:"\u4f8b\u7a0b\u529f\u80fd",id:"\u4f8b\u7a0b\u529f\u80fd",level:3},{value:"\u786c\u4ef6\u8d44\u6e90",id:"\u786c\u4ef6\u8d44\u6e90",level:3},{value:"\u539f\u7406\u56fe",id:"\u539f\u7406\u56fe",level:3},{value:"\u7a0b\u5e8f\u8bbe\u8ba1",id:"\u7a0b\u5e8f\u8bbe\u8ba1",level:2},{value:"DMA\u51fd\u6570\u89e3\u6790",id:"dma\u51fd\u6570\u89e3\u6790",level:3},{value:"\u83b7\u53d6DMA\u901a\u9053\u7684\u9ed8\u8ba4\u914d\u7f6e",id:"\u83b7\u53d6dma\u901a\u9053\u7684\u9ed8\u8ba4\u914d\u7f6e",level:4},{value:"\u8bbe\u7f6eDMA\u901a\u9053\u4f20\u8f93\u7684\u6570\u636e\u5bbd\u5ea6",id:"\u8bbe\u7f6edma\u901a\u9053\u4f20\u8f93\u7684\u6570\u636e\u5bbd\u5ea6",level:4},{value:"\u8bbe\u7f6eDMA\u901a\u9053\u7684DREQ\uff08\u6570\u636e\u8bf7\u6c42\uff09\u6e90",id:"\u8bbe\u7f6edma\u901a\u9053\u7684dreq\u6570\u636e\u8bf7\u6c42\u6e90",level:4},{value:"\u8bbe\u7f6eDMA\u901a\u9053\u8bfb\u589e\u91cf",id:"\u8bbe\u7f6edma\u901a\u9053\u8bfb\u589e\u91cf",level:4},{value:"\u8bbe\u7f6eDMA\u901a\u9053\u5199\u589e\u91cf",id:"\u8bbe\u7f6edma\u901a\u9053\u5199\u589e\u91cf",level:4},{value:"\u542f\u7528\u6216\u7981\u7528\u6307\u5b9aDMA\u901a\u9053\u7684\u4e2d\u65ad0",id:"\u542f\u7528\u6216\u7981\u7528\u6307\u5b9adma\u901a\u9053\u7684\u4e2d\u65ad0",level:4},{value:"\u8bbe\u7f6e\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f",id:"\u8bbe\u7f6e\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f",level:4},{value:"\u542f\u7528\u6216\u7981\u7528\u6307\u5b9a\u7f16\u53f7\u7684\u4e2d\u65ad\uff08IRQ\uff09",id:"\u542f\u7528\u6216\u7981\u7528\u6307\u5b9a\u7f16\u53f7\u7684\u4e2d\u65adirq",level:4},{value:"\u786e\u8ba4\u6307\u5b9aDMA\u901a\u9053\u7684\u4e2d\u65ad0",id:"\u786e\u8ba4\u6307\u5b9adma\u901a\u9053\u7684\u4e2d\u65ad0",level:4},{value:"DMA\u901a\u9053\u914d\u7f6e",id:"dma\u901a\u9053\u914d\u7f6e",level:4},{value:"\u542f\u52a8\u6307\u5b9a\u7684DMA\u901a\u9053",id:"\u542f\u52a8\u6307\u5b9a\u7684dma\u901a\u9053",level:4},{value:"\u68c0\u67e5DMA\u901a\u9053\u5fd9\u788c\u72b6\u6001",id:"\u68c0\u67e5dma\u901a\u9053\u5fd9\u788c\u72b6\u6001",level:4},{value:"DMA\u9a71\u52a8\u89e3\u6790",id:"dma\u9a71\u52a8\u89e3\u6790",level:3},{value:"1\uff0cdma.h\u6587\u4ef6",id:"1dmah\u6587\u4ef6",level:4},{value:"2\uff0cdma.c\u6587\u4ef6",id:"2dmac\u6587\u4ef6",level:4},{value:"CMakeLists.txt\u6587\u4ef6",id:"cmakeliststxt\u6587\u4ef6",level:3},{value:"\u5b9e\u9a8c\u5e94\u7528\u4ee3\u7801",id:"\u5b9e\u9a8c\u5e94\u7528\u4ee3\u7801",level:3},{value:"\u4e0b\u8f7d\u9a8c\u8bc1",id:"\u4e0b\u8f7d\u9a8c\u8bc1",level:2}];function t(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,d.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"dma\u5b9e\u9a8c",children:"DMA\u5b9e\u9a8c"})}),"\n",(0,l.jsx)(e.h2,{id:"\u524d\u8a00",children:"\u524d\u8a00"}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u7ae0\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528RP2350A\u5f00\u53d1\u677f\u7684DMA\u529f\u80fd\u3002\u901a\u8fc7\u672c\u7ae0\u7684\u5b66\u4e60\uff0c\u8bfb\u8005\u5c06\u5b66\u4e60\u5230\u5982\u4f55\u4f7f\u7528SDK\u9a71\u52a8RP2350A\u7684DMA\u529f\u80fd\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"dma-\u4ecb\u7ecd",children:"DMA \u4ecb\u7ecd"}),"\n",(0,l.jsx)(e.h3,{id:"1dma\u7b80\u4ecb",children:"1\uff0cDMA\u7b80\u4ecb"}),"\n",(0,l.jsx)(e.p,{children:"DMA\uff0c\u5168\u79f0\u4e3a\uff1aDirect Memory Access\uff0c\u5373\u76f4\u63a5\u5b58\u50a8\u5668\u8bbf\u95ee\u3002DMA\u4f20\u8f93\u65b9\u5f0f\u65e0\u9700CPU\u76f4\u63a5\u63a7\u5236\u4f20\u8f93\uff0c\u4e5f\u6ca1\u6709\u4e2d\u65ad\u5904\u7406\u65b9\u5f0f\u90a3\u6837\u4fdd\u7559\u73b0\u573a\u548c\u6062\u590d\u73b0\u573a\u7684\u8fc7\u7a0b\uff0c\u901a\u8fc7\u786c\u4ef6\u4e3aRAM\u4e0eI/O\u8bbe\u5907\u5f00\u8f9f\u4e00\u6761\u76f4\u63a5\u4f20\u9001\u6570\u636e\u7684\u901a\u8def\uff0c\u80fd\u4f7fCPU\u7684\u6548\u7387\u5927\u4e3a\u63d0\u9ad8 \u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u786c\u4ef6\u8bbe\u8ba1",children:"\u786c\u4ef6\u8bbe\u8ba1"}),"\n",(0,l.jsx)(e.h3,{id:"\u4f8b\u7a0b\u529f\u80fd",children:"\u4f8b\u7a0b\u529f\u80fd"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u672c\u7ae0\u5b9e\u9a8c\u529f\u80fd\u7b80\u4ecb\uff1a\u521b\u5efaDMA\uff0c\u5c06\u6570\u636e\u901a\u8fc7DMA\u53d1\u9001\u5230\u4e32\u53e3\u4e2d\uff0c\u6bcf\u6309\u4e0bKEY1\uff0c\u5c31\u4f1a\u5c06\u5b9a\u4e49\u7684\u7f13\u5b58\u533a\u6570\u636e\u4ee5DMA\u7684\u65b9\u5f0f\u53d1\u9001\u5230\u4e32\u53e3\u3002\u6253\u5f00\u4e32\u53e3\u8c03\u8bd5\u52a9\u624bXCOM\uff0c\u53ef\u4ee5\u6536\u5230DMA\u53d1\u9001\u7684\u5185\u5bb9\u3002"}),"\n",(0,l.jsx)(e.li,{children:"LED\u95ea\u70c1\uff0c\u6307\u793a\u7a0b\u5e8f\u6b63\u5728\u8fd0\u884c\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u786c\u4ef6\u8d44\u6e90",children:"\u786c\u4ef6\u8d44\u6e90"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"LED:\nLED-GPIO3"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u72ec\u7acb\u6309\u952e:\nKEY-GPIO2"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"uart0:\uff08UART0_TX\u3001UART0_RX\u8fde\u63a5\u81f3\u677f\u8f7dUSB\u8f6c\u4e32\u53e3\u82af\u7247\u4e0a"}),"\n",(0,l.jsx)(e.p,{children:"UART0_TX - GPIO0"}),"\n",(0,l.jsx)(e.p,{children:"UART0_RX - GPIO1"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"DMA"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u539f\u7406\u56fe",children:"\u539f\u7406\u56fe"}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u7ae0\u5b9e\u9a8c\u4f7f\u7528\u7684 DMA \u4e3a RP2350A \u7684\u7247\u4e0a\u8d44\u6e90\uff0c\u56e0\u6b64\u5e76\u6ca1\u6709\u76f8\u5e94\u7684\u8fde\u63a5\u539f\u7406\u56fe\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u7a0b\u5e8f\u8bbe\u8ba1",children:"\u7a0b\u5e8f\u8bbe\u8ba1"}),"\n",(0,l.jsx)(e.h3,{id:"dma\u51fd\u6570\u89e3\u6790",children:"DMA\u51fd\u6570\u89e3\u6790"}),"\n",(0,l.jsxs)(e.p,{children:["PICO-SDK\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684DMA\u63a5\u53e3\u51fd\u6570\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728",(0,l.jsx)(e.code,{children:"pico-sdk\\src\\rp2_common\\hardware_dma"}),"\u8def\u5f84\u4e0b\u627e\u5230\u76f8\u5173\u7684dma.c\u548cdma.h\u6587\u4ef6\u3002\u5728dma.h\u5934\u6587\u4ef6\u4e2d\uff0c\u4f60\u53ef\u4ee5\u627e\u5230RP2350A\u7684\u6240\u6709DMA\u51fd\u6570\u5b9a\u4e49\u3002\u63a5\u4e0b\u6765\uff0c\u4f5c\u8005\u5c06\u4ecb\u7ecd\u4e00\u4e9b\u5e38\u7528\u7684DMA\u51fd\u6570\uff0c\u8fd9\u4e9b\u51fd\u6570\u7684\u63cf\u8ff0\u53ca\u5176\u4f5c\u7528\u5982\u4e0b\uff1a"]}),"\n",(0,l.jsx)(e.h4,{id:"\u83b7\u53d6dma\u901a\u9053\u7684\u9ed8\u8ba4\u914d\u7f6e",children:"\u83b7\u53d6DMA\u901a\u9053\u7684\u9ed8\u8ba4\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u83b7\u53d6DMA\u901a\u9053\u7684\u9ed8\u8ba4\u914d\u7f6e\u3002\u6b64\u51fd\u6570\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6807\u51c6\u5316\u7684DMA\u901a\u9053\u914d\u7f6e\u6a21\u677f\uff0c\u9002\u7528\u4e8e\u5e38\u89c1\u7684\u5355\u6b21\u5185\u5b58\u5230\u5916\u8bbe\u4f20\u8f93\u573a\u666f\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"static inline dma_channel_config dma_channel_get_default_config(uint channel)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"uint channel:\u6307\u5b9a\u76ee\u6807DMA\u901a\u9053\u53f7\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"dma_channel_config: \u7ed3\u6784\u4f53\uff0c\u5305\u542bDMA\u901a\u9053\u7684\u914d\u7f6e\u53c2\u6570\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u8bbe\u7f6edma\u901a\u9053\u4f20\u8f93\u7684\u6570\u636e\u5bbd\u5ea6",children:"\u8bbe\u7f6eDMA\u901a\u9053\u4f20\u8f93\u7684\u6570\u636e\u5bbd\u5ea6"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u901a\u8fc7\u4f4d\u63a9\u7801\u64cd\u4f5c\u5b89\u5168\u914d\u7f6eDMA\u901a\u9053\u7684\u6570\u636e\u4f20\u8f93\u5bbd\u5ea6\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"static inline void channel_config_set_transfer_data_size(dma_channel_config *c, enum dma_channel_transfer_size size)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"dma_channel_config *c\uff1aDMA\u901a\u9053\u914d\u7f6e\u7ed3\u6784\u4f53\u6307\u9488\uff0c\u7528\u4e8e\u4fee\u6539\u5bc4\u5b58\u5668\u503c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"enum dma_channel_transfer_size size\uff1a\u4f20\u8f93\u6570\u636e\u5927\u5c0f\u679a\u4e3e\u503c\uff08\u59828/16/32\u4f4d\uff09\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u8bbe\u7f6edma\u901a\u9053\u7684dreq\u6570\u636e\u8bf7\u6c42\u6e90",children:"\u8bbe\u7f6eDMA\u901a\u9053\u7684DREQ\uff08\u6570\u636e\u8bf7\u6c42\uff09\u6e90"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u901a\u8fc7\u4f4d\u63a9\u7801\u64cd\u4f5c\u5b89\u5168\u914d\u7f6eDMA\u901a\u9053\u7684\u89e6\u53d1\u8bf7\u6c42\u6e90(DREQ)\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"static inline void channel_config_set_dreq(dma_channel_config *c, uint dreq)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"dma_channel_config *c\uff1a\u6307\u5411DMA\u901a\u9053\u914d\u7f6e\u7ed3\u6784\u4f53\u7684\u6307\u9488\uff0c\u7528\u4e8e\u4fee\u6539\u5bc4\u5b58\u5668\u503c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"uint dreq\uff1a\u6570\u636e\u8bf7\u6c42\uff08DREQ\uff09\u6e90\u7f16\u53f7\uff0c\u7528\u4e8e\u6307\u5b9a\u89e6\u53d1DMA\u4f20\u8f93\u7684\u6761\u4ef6\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u8bbe\u7f6edma\u901a\u9053\u8bfb\u589e\u91cf",children:"\u8bbe\u7f6eDMA\u901a\u9053\u8bfb\u589e\u91cf"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4e3b\u8981\u7528\u9014\u662f\u5bf9 DMA \u901a\u9053\u914d\u7f6e\u4e2d\u7684\u8bfb\u53d6\u5730\u5740\u81ea\u589e\u6807\u5fd7\u8fdb\u884c\u8bbe\u7f6e\uff0c\u80fd\u591f\u4f9d\u636e\u9700\u6c42\u7075\u6d3b\u5f00\u542f\u6216\u5173\u95ed\u8bfb\u53d6\u5730\u5740\u81ea\u589e\u529f\u80fd\uff0c\u4ee5\u6b64\u6765\u6ee1\u8db3\u4e0d\u540c\u7684\u6570\u636e\u4f20\u8f93\u9700\u6c42\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"static inline void channel_config_set_read_increment(dma_channel_config *c, bool incr)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"c\uff1a\u6307\u5411 dma_channel_config \u7ed3\u6784\u4f53\u7684\u6307\u9488\uff0c\u6b64\u7ed3\u6784\u4f53\u6db5\u76d6\u4e86 DMA \u901a\u9053\u7684\u5404\u7c7b\u914d\u7f6e\u4fe1\u606f\u3002"}),"\n",(0,l.jsx)(e.li,{children:"incr\uff1a\u5e03\u5c14\u7c7b\u578b\u53c2\u6570\uff0c\u82e5\u4e3a true\uff0c\u5219\u8868\u793a\u5728 DMA \u8bfb\u53d6\u6570\u636e\u65f6\u8981\u81ea\u52a8\u589e\u52a0\u8bfb\u53d6\u5730\u5740\uff1b\u82e5\u4e3a false\uff0c\u5219\u8868\u793a\u8bfb\u53d6\u5730\u5740\u4fdd\u6301\u4e0d\u53d8\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u8bbe\u7f6edma\u901a\u9053\u5199\u589e\u91cf",children:"\u8bbe\u7f6eDMA\u901a\u9053\u5199\u589e\u91cf"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u662f\u7075\u6d3b\u63a7\u5236 DMA \u901a\u9053\u5728\u5199\u5165\u6570\u636e\u65f6\u662f\u5426\u81ea\u52a8\u589e\u52a0\u5199\u5165\u5730\u5740\u3002\u901a\u8fc7\u5f00\u542f\u6216\u5173\u95ed\u8be5\u529f\u80fd\uff0c\u53ef\u4ee5\u6ee1\u8db3\u4e0d\u540c\u7684\u6570\u636e\u4f20\u8f93\u573a\u666f\u9700\u6c42\uff0c\u63d0\u9ad8 DMA \u6570\u636e\u4f20\u8f93\u7684\u6548\u7387\u548c\u7075\u6d3b\u6027\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"static inline void channel_config_set_write_increment(dma_channel_config *c, bool incr)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"c\uff1a\u6307\u5411 dma_channel_config \u7ed3\u6784\u4f53\u7684\u6307\u9488\uff0c\u6b64\u7ed3\u6784\u4f53\u6db5\u76d6\u4e86 DMA \u901a\u9053\u7684\u5404\u7c7b\u914d\u7f6e\u4fe1\u606f\u3002"}),"\n",(0,l.jsx)(e.li,{children:"incr\uff1a\u8fd9\u662f\u4e00\u4e2a\u5e03\u5c14\u7c7b\u578b\u7684\u53c2\u6570\u3002\u5f53\u5b83\u7684\u503c\u4e3a true \u65f6\uff0c\u8868\u793a\u5728 DMA \u5199\u5165\u6570\u636e\u65f6\uff0c\u9700\u8981\u81ea\u52a8\u589e\u52a0\u5199\u5165\u5730\u5740\uff1b\u5f53\u5b83\u7684\u503c\u4e3a false \u65f6\uff0c\u8868\u793a\u5199\u5165\u5730\u5740\u4fdd\u6301\u4e0d\u53d8\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u542f\u7528\u6216\u7981\u7528\u6307\u5b9adma\u901a\u9053\u7684\u4e2d\u65ad0",children:"\u542f\u7528\u6216\u7981\u7528\u6307\u5b9aDMA\u901a\u9053\u7684\u4e2d\u65ad0"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u662f\u542f\u7528\u6216\u7981\u7528\u6307\u5b9a DMA\uff08\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\uff09\u901a\u9053\u7684\u4e2d\u65ad 0\uff08IRQ0\uff09\u3002DMA \u5141\u8bb8\u8bbe\u5907\u5728\u4e0d\u7ecf\u8fc7 CPU \u5e72\u9884\u7684\u60c5\u51b5\u4e0b\u76f4\u63a5\u4e0e\u5185\u5b58\u8fdb\u884c\u6570\u636e\u4f20\u8f93\uff0c\u800c\u4e2d\u65ad\u673a\u5236\u5219\u80fd\u8ba9 CPU \u5728 DMA \u64cd\u4f5c\u5b8c\u6210\u7b49\u7279\u5b9a\u4e8b\u4ef6\u53d1\u751f\u65f6\u5f97\u5230\u901a\u77e5\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"static inline void dma_channel_set_irq0_enabled(uint channel, bool enabled)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"channel\uff1a\u8fd9\u662f\u4e00\u4e2a\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u4ee3\u8868\u8981\u64cd\u4f5c\u7684 DMA \u901a\u9053\u7f16\u53f7\u3002"}),"\n",(0,l.jsx)(e.li,{children:"enabled\uff1a\u8fd9\u662f\u4e00\u4e2a\u5e03\u5c14\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u82e5\u503c\u4e3a true\uff0c\u5219\u8868\u793a\u542f\u7528\u6307\u5b9a DMA \u901a\u9053\u7684\u4e2d\u65ad 0\uff1b\u82e5\u503c\u4e3a false\uff0c\u5219\u8868\u793a\u7981\u7528\u8be5\u901a\u9053\u7684\u4e2d\u65ad 0\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u8bbe\u7f6e\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f",children:"\u8bbe\u7f6e\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u4e3a\u6307\u5b9a\u7f16\u53f7\u7684\u4e2d\u65ad\uff08IRQ\uff09\u8bbe\u7f6e\u4e00\u4e2a\u4e13\u5c5e\u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\u8be5\u51fd\u6570\u4f1a\u786e\u4fdd\u5728\u8bbe\u7f6e\u65b0\u7684\u5904\u7406\u7a0b\u5e8f\u4e4b\u524d\uff0c\u8fdb\u884c\u5fc5\u8981\u7684\u53c2\u6570\u68c0\u67e5\u548c\u5e76\u53d1\u63a7\u5236\uff0c\u5e76\u4e14\u5728\u67d0\u4e9b\u6761\u4ef6\u4e0b\u4f1a\u5bf9\u5df2\u6709\u5904\u7406\u7a0b\u5e8f\u8fdb\u884c\u68c0\u67e5\uff0c\u4fdd\u8bc1\u64cd\u4f5c\u7684\u6b63\u786e\u6027\u548c\u5b89\u5168\u6027\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"void irq_set_exclusive_handler(uint num, irq_handler_t handler)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["num\uff1a\u8fd9\u662f\u4e00\u4e2a\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u4ee3\u8868\u8981\u8bbe\u7f6e\u5904\u7406\u7a0b\u5e8f\u7684\u4e2d\u65ad\u7f16\u53f7\u3002\u4e0d\u540c\u7684\u4e2d\u65ad\u7f16\u53f7\u5bf9\u5e94\u7740\u4e0d\u540c\u7684\u786c\u4ef6\u6216\u8f6f\u4ef6\u4e2d\u65ad\u6e90\u3002\u5728\u4f8b\u7a0b\u4e2d\u8bbe\u7f6e\u4e86",(0,l.jsx)(e.code,{children:"DMA_IRQ_0"}),"\u4f5c\u4e3a\u4e2d\u65ad\u6e90\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"handler\uff1a\u8fd9\u662f\u4e00\u4e2a irq_handler_t \u7c7b\u578b\u7684\u51fd\u6570\u6307\u9488\uff0c\u6307\u5411\u8981\u4e3a\u8be5\u4e2d\u65ad\u8bbe\u7f6e\u7684\u5904\u7406\u7a0b\u5e8f\u3002\u5f53\u5bf9\u5e94\u7684\u4e2d\u65ad\u53d1\u751f\u65f6\uff0c\u7cfb\u7edf\u4f1a\u8c03\u7528\u8fd9\u4e2a\u5904\u7406\u7a0b\u5e8f\u6765\u5904\u7406\u4e2d\u65ad\u4e8b\u4ef6\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u542f\u7528\u6216\u7981\u7528\u6307\u5b9a\u7f16\u53f7\u7684\u4e2d\u65adirq",children:"\u542f\u7528\u6216\u7981\u7528\u6307\u5b9a\u7f16\u53f7\u7684\u4e2d\u65ad\uff08IRQ\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4e3b\u8981\u529f\u80fd\u662f\u542f\u7528\u6216\u7981\u7528\u6307\u5b9a\u7f16\u53f7\u7684\u4e2d\u65ad\uff08IRQ\uff09\u3002\u5b83\u4f1a\u5148\u5bf9\u4f20\u5165\u7684\u4e2d\u65ad\u7f16\u53f7\u8fdb\u884c\u5408\u6cd5\u6027\u68c0\u67e5\uff0c\u7136\u540e\u8c03\u7528 irq_set_mask_n_enabled \u51fd\u6570\u6765\u5b9e\u9645\u6267\u884c\u542f\u7528\u6216\u7981\u7528\u4e2d\u65ad\u7684\u64cd\u4f5c\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"void irq_set_enabled(uint num, bool enabled) \n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["num\uff1a\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\uff0c\u4ee3\u8868\u8981\u64cd\u4f5c\u7684\u4e2d\u65ad\u7f16\u53f7\u3002\u4e0d\u540c\u7684\u786c\u4ef6\u7cfb\u7edf\u4f1a\u6709\u4e0d\u540c\u6570\u91cf\u548c\u7f16\u53f7\u7684\u4e2d\u65ad\uff0c\u8be5\u53c2\u6570\u7528\u4e8e\u6307\u5b9a\u5177\u4f53\u8981\u542f\u7528\u6216\u7981\u7528\u7684\u4e2d\u65ad\u3002\u5728\u4f8b\u7a0b\u4e2d\u8bbe\u7f6e\u4e86",(0,l.jsx)(e.code,{children:"DMA_IRQ_0"}),"\u4f5c\u4e3a\u4e2d\u65ad\u6e90\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"enabled\uff1a\u5e03\u5c14\u7c7b\u578b\u53c2\u6570\uff0ctrue \u8868\u793a\u542f\u7528\u6307\u5b9a\u4e2d\u65ad\uff0cfalse \u8868\u793a\u7981\u7528\u6307\u5b9a\u4e2d\u65ad\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u786e\u8ba4\u6307\u5b9adma\u901a\u9053\u7684\u4e2d\u65ad0",children:"\u786e\u8ba4\u6307\u5b9aDMA\u901a\u9053\u7684\u4e2d\u65ad0"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u786e\u8ba4\u6307\u5b9a DMA\uff08\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\uff09\u901a\u9053\u7684\u4e2d\u65ad 0\uff08IRQ0\uff09\u3002\u5728 DMA \u64cd\u4f5c\u4e2d\uff0c\u5f53\u67d0\u4e2a\u901a\u9053\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1\u6216\u8005\u51fa\u73b0\u7279\u5b9a\u4e8b\u4ef6\u65f6\uff0c\u4f1a\u89e6\u53d1\u4e2d\u65ad\u901a\u77e5 CPU\u3002CPU \u5728\u5904\u7406\u5b8c\u8be5\u4e2d\u65ad\u540e\uff0c\u9700\u8981\u5411 DMA \u63a7\u5236\u5668\u786e\u8ba4\u5df2\u7ecf\u5904\u7406\uff0c\u4ee5\u6e05\u9664\u76f8\u5e94\u7684\u4e2d\u65ad\u6807\u5fd7\uff0c\u907f\u514d\u91cd\u590d\u89e6\u53d1\u4e2d\u65ad\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"static inline void dma_channel_acknowledge_irq0(uint channel)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"channel\uff1a\u8fd9\u662f\u4e00\u4e2a\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u4ee3\u8868\u8981\u64cd\u4f5c\u7684 DMA \u901a\u9053\u7f16\u53f7\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"dma\u901a\u9053\u914d\u7f6e",children:"DMA\u901a\u9053\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u786e\u8ba4\u6307\u5b9a DMA\uff08\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\uff09\u901a\u9053\u7684\u4e2d\u65ad 0\uff08IRQ0\uff09\u3002\u5728 DMA \u64cd\u4f5c\u4e2d\uff0c\u5f53\u67d0\u4e2a\u901a\u9053\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1\u6216\u8005\u51fa\u73b0\u7279\u5b9a\u4e8b\u4ef6\u65f6\uff0c\u4f1a\u89e6\u53d1\u4e2d\u65ad\u901a\u77e5 CPU\u3002CPU \u5728\u5904\u7406\u5b8c\u8be5\u4e2d\u65ad\u540e\uff0c\u9700\u8981\u5411 DMA \u63a7\u5236\u5668\u786e\u8ba4\u5df2\u7ecf\u5904\u7406\uff0c\u4ee5\u6e05\u9664\u76f8\u5e94\u7684\u4e2d\u65ad\u6807\u5fd7\uff0c\u907f\u514d\u91cd\u590d\u89e6\u53d1\u4e2d\u65ad\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"static inline void dma_channel_configure(uint channel, const dma_channel_config *config,                \n                                         volatile void *write_addr,\n                                         const volatile void *read_addr,\n                                         uint transfer_count, bool trigger)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"channel\uff1a\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\uff0c\u4ee3\u8868\u8981\u914d\u7f6e\u7684 DMA \u901a\u9053\u7f16\u53f7\u3002\u4e0d\u540c\u7684\u901a\u9053\u53ef\u72ec\u7acb\u8fdb\u884c DMA \u64cd\u4f5c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"config\uff1a\u6307\u5411 dma_channel_config \u7ed3\u6784\u4f53\u7684\u5e38\u91cf\u6307\u9488\uff0c\u8be5\u7ed3\u6784\u4f53\u5305\u542b\u4e86 DMA \u901a\u9053\u7684\u5404\u79cd\u914d\u7f6e\u4fe1\u606f\uff0c\u5982\u6570\u636e\u4f20\u8f93\u65b9\u5411\u3001\u4f20\u8f93\u6570\u636e\u5927\u5c0f\u7b49\u3002"}),"\n",(0,l.jsx)(e.li,{children:"write_addr\uff1a\u6307\u5411 volatile void \u7c7b\u578b\u7684\u6307\u9488\uff0c\u4ee3\u8868 DMA \u6570\u636e\u4f20\u8f93\u7684\u76ee\u6807\u5730\u5740\uff0c\u5373\u6570\u636e\u8981\u5199\u5165\u7684\u4f4d\u7f6e\u3002"}),"\n",(0,l.jsx)(e.li,{children:"read_addr\uff1a\u6307\u5411 const volatile void \u7c7b\u578b\u7684\u6307\u9488\uff0c\u4ee3\u8868 DMA \u6570\u636e\u4f20\u8f93\u7684\u6e90\u5730\u5740\uff0c\u5373\u6570\u636e\u7684\u8bfb\u53d6\u4f4d\u7f6e\u3002"}),"\n",(0,l.jsx)(e.li,{children:"transfer_count\uff1a\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\uff0c\u4ee3\u8868\u8981\u4f20\u8f93\u7684\u6570\u636e\u9879\u6570\u91cf\u3002"}),"\n",(0,l.jsx)(e.li,{children:"trigger\uff1a\u5e03\u5c14\u7c7b\u578b\uff0c\u82e5\u4e3a true\uff0c\u5219\u5728\u914d\u7f6e\u5b8c\u6210\u540e\u7acb\u5373\u89e6\u53d1 DMA \u4f20\u8f93\uff1b\u82e5\u4e3a false\uff0c\u5219\u4e0d\u7acb\u5373\u89e6\u53d1\uff0c\u9700\u8981\u540e\u7eed\u624b\u52a8\u542f\u52a8\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u542f\u52a8\u6307\u5b9a\u7684dma\u901a\u9053",children:"\u542f\u52a8\u6307\u5b9a\u7684DMA\u901a\u9053"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u542f\u52a8\u6307\u5b9a\u7684 DMA\uff08\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\uff09\u901a\u9053\u3002DMA \u6280\u672f\u80fd\u8ba9\u8bbe\u5907\u5728\u4e0d\u4f9d\u8d56 CPU \u9891\u7e41\u5e72\u9884\u7684\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u4e0e\u5185\u5b58\u8fdb\u884c\u6570\u636e\u4f20\u8f93\uff0c\u6709\u6548\u63d0\u5347\u6570\u636e\u4f20\u8f93\u6548\u7387\u3002\u8be5\u51fd\u6570\u901a\u8fc7\u8c03\u7528 dma_start_channel_mask \u51fd\u6570\u6765\u5b9e\u73b0\u542f\u52a8\u6307\u5b9a DMA \u901a\u9053\u7684\u64cd\u4f5c\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"static inline void dma_channel_start(uint channel)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"channel\uff1a\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u4ee3\u8868\u8981\u542f\u52a8\u7684 DMA \u901a\u9053\u7f16\u53f7\u3002\u4e0d\u540c\u7684 DMA \u901a\u9053\u53ef\u4ee5\u72ec\u7acb\u6267\u884c\u6570\u636e\u4f20\u8f93\u4efb\u52a1\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u68c0\u67e5dma\u901a\u9053\u5fd9\u788c\u72b6\u6001",children:"\u68c0\u67e5DMA\u901a\u9053\u5fd9\u788c\u72b6\u6001"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u51fd\u6570\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u68c0\u67e5\u6307\u5b9a\u7684 DMA\u901a\u9053\u662f\u5426\u5904\u4e8e\u5fd9\u788c\u72b6\u6001\uff0c\u5373\u662f\u5426\u6b63\u5728\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u64cd\u4f5c\u3002\u5728 DMA \u7cfb\u7edf\u91cc\uff0c\u8fd9\u4e00\u529f\u80fd\u5f88\u5173\u952e\uff0c\u56e0\u4e3a\u53ea\u6709\u5728\u901a\u9053\u7a7a\u95f2\u65f6\uff0c\u624d\u53ef\u4ee5\u5b89\u5168\u5730\u5bf9\u5176\u8fdb\u884c\u91cd\u65b0\u914d\u7f6e\u6216\u53d1\u8d77\u65b0\u7684\u4f20\u8f93\u3002\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"inline static bool dma_channel_is_busy(uint channel)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u53c2\u6570\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"channel\uff1a\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u4ee3\u8868\u8981\u542f\u52a8\u7684 DMA \u901a\u9053\u7f16\u53f7\u3002\u4e0d\u540c\u7684 DMA \u901a\u9053\u53ef\u4ee5\u72ec\u7acb\u6267\u884c\u6570\u636e\u4f20\u8f93\u4efb\u52a1\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u3010\u8fd4\u56de\u503c\u3011"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"dma\u9a71\u52a8\u89e3\u6790",children:"DMA\u9a71\u52a8\u89e3\u6790"}),"\n",(0,l.jsxs)(e.p,{children:["\u5728SDK\u7248\u672c\u768409_dma\u4f8b\u7a0b\u4e2d\uff0c\u4f5c\u8005\u5728",(0,l.jsx)(e.code,{children:"09_dma\\BSP"}),"\u8def\u5f84\u4e0b\u65b0\u589e\u4e86\u4e00\u4e2aDMA\u6587\u4ef6\u5939\uff0c\u7528\u4e8e\u5b58\u653e dma.c\u3001 dma.h\u8fd9\u4e24\u4e2a\u6587\u4ef6\u3002\u5176\u4e2d\uff0cdma.h \u6587\u4ef6\u8d1f\u8d23\u58f0\u660eADC\u76f8\u5173\u7684\u51fd\u6570\u548c\u53d8\u91cf\uff0c\u800c dma.c\u6587\u4ef6\u5219\u5b9e\u73b0\u4e86DMA\u7684\u9a71\u52a8\u4ee3\u7801\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5c06\u8be6\u7ec6\u89e3\u6790\u8fd9\u4e24\u4e2a\u6587\u4ef6\u7684\u5b9e\u73b0\u5185\u5bb9\u3002"]}),"\n",(0,l.jsx)(e.h4,{id:"1dmah\u6587\u4ef6",children:"1\uff0cdma.h\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"#define UART_NUM \tuart0\n#define UART_BAUD_RATE \t115200\n#define UART_TX_PIN \t0\n#define UART_RX_PIN \t1\n#define DMA_CHAN        0\n\n/* DMA\u4f20\u8f93\u5b8c\u6210\u6807\u5fd7 */\nextern volatile bool dma_done;\nextern int dma_chan;\nextern dma_channel_config dma_ctrl;\n"})}),"\n",(0,l.jsx)(e.h4,{id:"2dmac\u6587\u4ef6",children:"2\uff0cdma.c\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"/**\n * @brief       DMA\u5b8c\u6210\u4e2d\u65ad\u5904\u7406\u51fd\u6570\n * @param       \u65e0\n * @retval      \u65e0\n */\nvoid __isr dma_handler(void) \n{\n    if (dma_channel_get_irq0_status(DMA_CHAN))\n    {\n        dma_channel_acknowledge_irq0(DMA_CHAN);\n        dma_done = true;\n    }\n}\n\n/**\n * @brief       \u521d\u59cb\u5316DMA\u4e0eUART\n * @param       \u65e0\n * @retval      \u65e0\n */\nvoid dma_uart_init(void)\n{\n    /* \u521d\u59cb\u5316 */\n    uart_init(UART_NUM, UART_BAUD_RATE);\n    gpio_set_function(UART_TX_PIN, GPIO_FUNC_UART);\n    gpio_set_function(UART_RX_PIN, GPIO_FUNC_UART);\n\n    /* \u914d\u7f6eDMA\u901a\u9053 */\n    dma_ctrl = dma_channel_get_default_config(DMA_CHAN);\n    channel_config_set_transfer_data_size(&dma_ctrl, DMA_SIZE_8);    /* 8\u4f4d\u4f20\u8f93 */\n    channel_config_set_dreq(&dma_ctrl, DREQ_UART0_TX);               /* UART_TX\u4f5c\u4e3a\u6570\u636e\u8bf7\u6c42 */\n    channel_config_set_read_increment(&dma_ctrl, true);              /* \u6e90\u5730\u5740\u9012\u589e */\n    channel_config_set_write_increment(&dma_ctrl, false);            /* \u76ee\u6807\u5730\u5740\u56fa\u5b9a */\n\n    /* \u8bbe\u7f6eDMA\u5b8c\u6210\u4e2d\u65ad */\n    dma_channel_set_irq0_enabled(DMA_CHAN, true);\n    irq_set_exclusive_handler(DMA_IRQ_0, dma_handler);\n    irq_set_enabled(DMA_IRQ_0, true);\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u4e24\u4e2a\u51fd\u6570\u76f8\u4e92\u914d\u5408\uff0cdma_uart_init \u51fd\u6570\u5b8c\u6210\u4e86 DMA \u548c UART \u7684\u521d\u59cb\u5316\u4e0e\u914d\u7f6e\u5de5\u4f5c\uff0c\u4f7f\u5f97 DMA \u80fd\u591f\u5728 UART \u53d1\u9001\u6570\u636e\u65f6\u8fdb\u884c\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\u3002\u800c dma_handler \u51fd\u6570\u5219\u8d1f\u8d23\u5904\u7406 DMA \u5b8c\u6210\u4e2d\u65ad\uff0c\u786e\u4fdd\u5728 DMA \u64cd\u4f5c\u5b8c\u6210\u540e\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"cmakeliststxt\u6587\u4ef6",children:"CMakeLists.txt\u6587\u4ef6"}),"\n",(0,l.jsx)(e.p,{children:"\u6253\u5f00\u672c\u7ae0\u8282\u7684\u5b9e\u9a8c\uff0809_dma\uff09\uff0c\u5728\u6574\u4e2a\u5de5\u7a0b\u6587\u4ef6\u4e0b\u5305\u542b\u4e86\u4e00\u4e2aCMakeLists.txt\u6587\u4ef6\u3002\u5173\u4e8e\u8be5\u5b9e\u9a8c\u7684CMakeLists.txt\u6587\u4ef6\u7684\u5177\u4f53\u5185\u5bb9\u4e0e\u4e0a\u4e00\u7ae0\u8282\u5e76\u6ca1\u6709\u4ec0\u4e48\u592a\u5927\u7684\u4e0d\u540c\uff0c\u56e0\u6b64\u4e0d\u518d\u8d58\u8ff0\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u5b9e\u9a8c\u5e94\u7528\u4ee3\u7801",children:"\u5b9e\u9a8c\u5e94\u7528\u4ee3\u7801"}),"\n",(0,l.jsx)(e.p,{children:"\u6253\u5f00main.c\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5b9a\u4e49\u4e86\u5de5\u7a0b\u5165\u53e3\u51fd\u6570\uff0c\u540d\u4e3amain\u3002\u8be5\u51fd\u6570\u4ee3\u7801\u5982\u4e0b\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:'const char text_to_send[] = "\u6b63\u70b9\u539f\u5b50 RP2350A\u6700\u5c0f\u7cfb\u7edf\u677f DMA\u5b9e\u9a8c\\r\\n";\n#define SEND_BUF_SIZE (sizeof(text_to_send) * 20)   /* \u53d1\u9001\u6570\u636e\u957f\u5ea6 */\nuint8_t g_sendbuf[SEND_BUF_SIZE];\n\nint main()\n{\n    uint16_t len;\n    uint16_t i;\n    uint8_t key;\n\n    stdio_init_all();           /* \u521d\u59cb\u5316\u6807\u51c6\u5e93 */\n    led_init();                 /* \u521d\u59cb\u5316LED */\n    key_init();                 /* \u521d\u59cb\u5316KEY */\n    dma_uart_init();            /* \u521d\u59cb\u5316\u521d\u59cb\u5316DMA\u4e0eUART */\n\n    len = sizeof(text_to_send); /* \u586b\u5145\u53d1\u9001\u6570\u636e\u7f13\u51b2\u533a */\n\n    /* \u586b\u5145\u7f13\u51b2\u533a\uff1a\u5c06\u6570\u636e\u91cd\u590d\u53d1\u900120\u6b21 */\n    for (i = 0; i < SEND_BUF_SIZE; i++) \n    {\n        g_sendbuf[i] = text_to_send[i % len];\n    }\n\n    i = 0;\n\n    while (1)\n    {\n        key = key_scan(0);\n\n        if (key == KEY1_PRES)\n        {\n            printf("Start Transimit....\\r\\n");      /* \u5f00\u59cb\u4f20\u8f93 */\n            printf( "\\r\\n");\n\n            dma_channel_configure(\n                DMA_CHAN,                           /* Channel\u53f7 */\n                &dma_ctrl,                          /* \u914d\u7f6eDMA\u7ed3\u6784\u4f53 */\n                &uart_get_hw(UART_NUM)->dr,         /* \u76ee\u6807\u5730\u5740\uff08UART\u6570\u636e\u5bc4\u5b58\u5668\uff09 */ \n                g_sendbuf,                          /* \u6e90\u5730\u5740\u6539\u4e3ag_sendbuf */\n                SEND_BUF_SIZE,                      /* \u4f20\u8f93\u6570\u91cf\uff0820\u6b21\u5b8c\u6574\u5b57\u7b26\u4e32\uff09 */\n                false                               /* \u4e0d\u7acb\u5373\u542f\u52a8 */\n            );\n\n            dma_channel_start(DMA_CHAN);            /* \u663e\u5f0f\u542f\u52a8 */\n\n            while (dma_channel_is_busy(DMA_CHAN))   /* \u963b\u585e\u5f53\u524d\u4ee3\u7801\u7684\u6267\u884c\uff0c\u76f4\u5230 DMA \u4f20\u8f93\u5b8c\u6210 */\n            {\n                tight_loop_contents();              /* \u5728\u5faa\u73af\u4e2d\u4fdd\u6301 CPU \u6d3b\u52a8\uff0c\u9632\u6b62\u7f16\u8bd1\u5668\u4f18\u5316\u6389\u8fd9\u4e2a\u5faa\u73af\uff0c\u786e\u4fdd\u5faa\u73af\u786e\u5b9e\u5728\u7b49\u5f85 DMA \u5b8c\u6210 */\n            }\n\n            printf( "\\r\\n");\n            printf("Transimit Finished!");          /* \u4f20\u8f93\u5b8c\u6210 */\n        }\n\n        i ++;\n        sleep_ms(10);\n\n        if (i == 20)\n        {\n            LED_TOGGLE();                           /* LED\u95ea\u70c1,\u63d0\u793a\u7cfb\u7edf\u6b63\u5728\u8fd0\u884c */\n            i = 0;\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u7a0b\u5e8f\u901a\u8fc7\u6309\u952eKEY1\u89e6\u53d1\uff0c\u5229\u7528 DMA \u65b9\u5f0f\u91cd\u590d 20 \u6b21,\u5c06\u6587\u672c\u5185\u5bb9\u53d1\u9001\u5230 UART\uff0c\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4f1a\u8fdb\u884c\u72b6\u6001\u63d0\u793a\uff0c\u540c\u65f6\u901a\u8fc7 LED \u706f\u95ea\u70c1\u63d0\u793a\u7cfb\u7edf\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\u3002\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u63d0\u9ad8\u6570\u636e\u4f20\u8f93\u6548\u7387\uff0c\u51cf\u5c11 CPU \u5e72\u9884\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u4e0b\u8f7d\u9a8c\u8bc1",children:"\u4e0b\u8f7d\u9a8c\u8bc1"}),"\n",(0,l.jsx)(e.p,{children:"\u6309\u4e0bKEY1\u6309\u952e\uff0cUART0\u4ee5DMA\u65b9\u5f0f\u53d1\u9001\u6570\u636e\u3002\u53ef\u4ee5\u901a\u8fc7\u4e32\u53e3\u52a9\u624b\u67e5\u770b\u53d1\u9001\u7684\u4fe1\u606f\u3002LED\u95ea\u70c1 ,\u63d0\u793a\u7a0b\u5e8f\u8fd0\u884c\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{alt:"01",src:i(46103).A+"",width:"702",height:"626"})})]})}function _(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}}}]);